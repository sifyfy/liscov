# liscov アーキテクチャ概要

## 📖 概要

**liscov** は YouTube Live Chat Monitor として設計された Rust + Dioxus 0.6.3 ベースのデスクトップアプリケーションです。リアルタイムでYouTubeライブチャットを監視・分析し、収益トラッキング、視聴者エンゲージメント分析、Q&A検出などの機能を提供します。

## 🎯 プロジェクトビジョン

- **リアルタイム性**: 低遅延でライブチャットを処理
- **スケーラビリティ**: 大量のメッセージを効率的に処理
- **分析性**: 深い洞察を提供するアナリティクス機能
- **拡張性**: プラグインシステムによる機能拡張
- **保守性**: モジュラー設計による長期保守性

## 🏗️ アーキテクチャ原則

1. **イベント駆動アーキテクチャ**: 非同期メッセージ処理
2. **レイヤー分離**: GUI/API/データ層の明確な分離
3. **メモリ効率**: 循環バッファによるメモリ最適化
4. **エラー回復性**: 階層化エラー処理とレジリエンス設計
5. **設定駆動**: 柔軟な設定管理システム

## 📁 ドキュメント構成

### 詳細ドキュメント

- [システム全体図](./system-overview.md) - 全体アーキテクチャとデータフロー
- [GUI アーキテクチャ](./gui-architecture.md) - Dioxus 0.6.3 コンポーネント設計
- [API アーキテクチャ](./api-architecture.md) - YouTube InnerTube API統合
- [データ アーキテクチャ](./data-architecture.md) - データベース設計とモデル
- [状態管理システム](./state-management.md) - イベント駆動状態管理
- [パフォーマンス戦略](./performance.md) - メモリ最適化と性能設計
- [移行戦略](./migration-strategy.md) - Slint→Dioxus移行記録

### 補助ドキュメント

- [アーキテクチャ図](../diagrams/) - Mermaid図によるビジュアル解説
- [API仕様](../api/) - 内部API仕様とエンドポイント
- [開発ガイド](../development/) - 開発者向けガイドライン

## 🏛️ 高レベルアーキテクチャ

```
┌─────────────────────────────────────────────────────────┐
│                    liscov.rs                            │
│                 (アプリケーション                        │
│                   エントリポイント)                      │
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────┐
│                GUI Layer                                │
│            (Dioxus 0.6.3)                              │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐      │
│  │MainWindow│ │Chat     │ │Revenue  │ │Export   │      │
│  │         │ │Display  │ │Dashboard│ │Panel    │      │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘      │
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────┐
│                State Management                         │
│              (Event-Driven)                            │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐      │
│  │StateManager │ │EventBus     │ │SignalSystem │      │
│  └─────────────┘ └─────────────┘ └─────────────┘      │
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────┐
│                Service Layer                            │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐      │
│  │LiveChat     │ │Analytics    │ │Chat         │      │
│  │Service      │ │Service      │ │Management   │      │
│  └─────────────┘ └─────────────┘ └─────────────┘      │
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────┐
│                 Data Layer                              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐      │
│  │YouTube      │ │SQLite       │ │File I/O     │      │
│  │InnerTube    │ │Database     │ │System       │      │
│  │API          │ │             │ │             │      │
│  └─────────────┘ └─────────────┘ └─────────────┘      │
└─────────────────────────────────────────────────────────┘
```

## 🔧 技術スタック

### コア技術

- **Language**: Rust 2021 Edition
- **GUI Framework**: Dioxus 0.6.3 (Desktop)
- **Runtime**: Tokio (非同期ランタイム)
- **Database**: SQLite (rusqlite)
- **HTTP Client**: reqwest
- **Serialization**: serde (JSON)

### 開発・ビルドツール

- **Build System**: Cargo + Dioxus CLI
- **CLI Framework**: clap
- **Logging**: tracing + tracing-subscriber
- **Testing**: cargo test + tokio-test
- **Configuration**: TOML (directories + XDG)

### 外部統合

- **YouTube API**: InnerTube (非公式)
- **Export Formats**: CSV, Excel (rust_xlsxwriter), JSON
- **File Dialogs**: rfd (Native file dialogs)
- **Charts**: dioxus-charts

## 📊 主要機能

### 1. ライブチャット監視

- リアルタイムメッセージ取得・表示
- 継続的接続管理・エラー回復
- メッセージフィルタリング・検索

### 2. 収益分析

- Super Chat収益トラッキング
- メンバーシップ加入分析
- 時間別収益レポート

### 3. 視聴者エンゲージメント

- コメント傾向分析
- アクティブユーザー識別
- Q&A自動検出

### 4. データエクスポート

- 複数形式対応 (CSV/Excel/JSON)
- カスタムフィルタリング
- バッチ処理機能

## 🚧 現在の開発状況

### Migration Phase: Slint → Dioxus 0.6.3

- **Phase 0-1**: 技術検証・基本構造 ✅ **完了**
- **Phase 2**: コンポーネント移行 🚧 **進行中**
- **Phase 3**: 高度な機能実装 📋 **計画中**

### 現在利用可能な機能

- ✅ 基本的なライブチャット表示
- ✅ 接続管理・継続トークン処理
- ✅ 基本的な収益ダッシュボード
- ✅ メッセージフィルタリング
- ✅ SQLite データベース統合
- ✅ ファイルエクスポート機能

### 開発中の機能

- 🚧 プラグインシステム完全実装
- 🚧 高度なアナリティクス機能
- 🚧 パフォーマンス最適化
- 🚧 UI/UX改善

## 📚 関連ドキュメント

- [CLAUDE.md](../../CLAUDE.md) - Claude Code向け開発ガイド
- [Cargo.toml](../../Cargo.toml) - プロジェクト設定と依存関係
- [DIOXUS.toml](../../Dioxus.toml) - Dioxus固有設定

---

**最終更新**: 2025-06-25  
**バージョン**: 0.1.0  
**移行状況**: Phase 0-1 完了
